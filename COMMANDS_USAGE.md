# 🎿 Использование CLI команд для Steinschliff

Актуальный способ запуска CLI:
1) Через `just` (для основных задач разработки: build/export/lint/test).
2) Напрямую через модуль `steinschliff.cli` (для CLI-команд вроде `conditions` и `list`).

## 📊 Команда `conditions` - Статистика по условиям снега

### Описание
Выводит детальную статистику распределения структур по условиям снега (snow conditions).

### Использование

```bash
# Базовое использование
uv run python -m steinschliff.cli conditions

# С указанием директории шлифов
uv run python -m steinschliff.cli conditions --schliffs schliffs

# С включенным debug логированием
uv run python -m steinschliff.cli conditions --log-level DEBUG
```

### Параметры

| Параметр | Короткий | Описание | По умолчанию |
|----------|----------|----------|--------------|
| `--schliffs` | `-s` | Путь к директории со шлифами | `schliffs` |
| `--log-level` | `-l` | Уровень логирования (DEBUG/INFO/WARNING/ERROR/CRITICAL) | `WARNING` |

### Пример вывода

```
                     📊 Статистика по условиям снега
┏━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━┓
┃ Условие ┃ Emoji ┃ Название        ┃ Температура ┃ Количество ┃      % ┃
┡━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━┩
│ blue   │  🔵   │ Умеренный холод │   -12…0°C   │         74 │  43.5% │
│ pink   │  💗   │ Мокрый          │   0…20°C    │         22 │  12.9% │
│ green  │  🟢   │ Холод           │  -30…-12°C  │         21 │  12.4% │
│ violet │  🟣   │ Старый          │   -15…0°C   │         21 │  12.4% │
│ yellow │  💛   │ Тепло           │   0…20°C    │         20 │  11.8% │
│ red    │  🔴   │ Переходка       │   -5…5°C    │          6 │   3.5% │
│ brown  │  🟤   │ Грязный         │    любая    │          5 │   2.9% │
│ orange │  🟠   │ Глянец          │   -5…5°C    │          1 │   0.6% │
├─────────┼───────┼─────────────────┼─────────────┼────────────┼────────┤
│ ВСЕГО   │       │                 │             │        170 │ 100.0% │
└─────────┴───────┴─────────────────┴─────────────┴────────────┴────────┘

✅ Все структуры имеют валидные значения condition!
```

### Что показывает таблица

- **Условие** - Ключ условия снега (blue, red, green и т.д.)
- **Emoji** - Эмодзи для визуальной идентификации
- **Название** - Русское название условия из `snow_conditions/*.yaml`
- **Температура** - Температурный диапазон для данного условия
- **Количество** - Количество структур с этим условием
- **%** - Процент от общего количества структур

### Условия снега (Snow Conditions)

| Код | Emoji | Название | Температура | Характеристики |
|-----|-------|----------|-------------|----------------|
| `green` | 🟢 | Холод | -30…-12°C | Холодный, скрипучий, сухой |
| `blue` | 🔵 | Умеренный холод | -12…0°C | Свежий, порошкообразный |
| `violet` | 🟣 | Старый | -15…0°C | Ледяной, сахарный, старый |
| `orange` | 🟠 | Глянец | -5…5°C | Новый, глянцевый |
| `red` | 🔴 | Переходка | -5…5°C | Крупнозернистый, слёживающийся |
| `pink` | 💗 | Мокрый | 0…20°C | Насыщенный водой, новый |
| `yellow` | 💛 | Тепло | 0…20°C | Мокрый, старый |
| `brown` | 🟤 | Грязный | любая | Грязный, загрязнённый |

---

## 📋 Другие полезные команды

### `generate` - Генерация README
```bash
just build
# или напрямую:
uv run python -m steinschliff.cli generate
```

### `export-json` - Экспорт в JSON
```bash
just export-json
# или напрямую:
uv run python -m steinschliff.cli export-json
```

### `list` - Просмотр списка структур
```bash
# Все структуры
uv run python -m steinschliff.cli list

# Фильтр по бренду
uv run python -m steinschliff.cli list --service "Fischer"

# Фильтр по условию
uv run python -m steinschliff.cli list --condition "blue"

# Комбинированный фильтр
uv run python -m steinschliff.cli list --service "Fischer" --condition "blue"
```

---

## 🛠️ Вспомогательные скрипты

### Проверка/валидация контента
```bash
# Проверка корректности snow conditions
uv run python scripts/validate_snow_conditions.py

# Проверка YAML на нежелательную кириллицу (если включено правилами проекта)
uv run python scripts/check_cyrillic.py
```

### Локализация (i18n)

```bash
# Список локалей
uv run python scripts/manage_translations.py list
```

---

## 📝 Примечания

- Все команды запускаются через `uv run` для использования виртуального окружения
- Данные загружаются из директории `schliffs/` и файлов `snow_conditions/*.yaml`
- Статистика обновляется автоматически при изменении YAML-файлов
