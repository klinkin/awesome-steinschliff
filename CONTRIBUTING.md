# Правила вкладов

- [Правила вкладов](#правила-вкладов)
  - [ Кодекс поведения](#-кодекс-поведения)
  - [ Вопрос или проблема?](#-вопрос-или-проблема)
  - [ Нашли баг?](#-нашли-баг)
  - [ Не хватает фичи?](#-не-хватает-фичи)
  - [ Как отправлять ишью/PR](#-как-отправлять-ишьюpr)
    - [Отправка ишью](#отправка-ишью)
    - [Отправка Pull Request](#отправка-pull-request)
      - [Ревью Pull Request](#ревью-pull-request)
      - [Адресация замечаний](#адресация-замечаний)
      - [После мержа](#после-мержа)
  - [ Правила кодирования](#-правила-кодирования)
  - [ Конвенция сообщений коммитов](#-конвенция-сообщений-коммитов)
  - [ Слияние Pull Request](#-слияние-pull-request)

## <a name="coc"></a> Кодекс поведения

Пожалуйста, ознакомьтесь и следуйте нашему файлу [Code of Conduct](code-of-conduct.md).

## <a name="question"></a> Вопрос или проблема?

Для обсуждений и вопросов используйте:

- Чат в Telegram: `https://t.me/+wddxUugE0gwxMGU6`
- Тема на skisport.ru: `https://www.skisport.ru/forum/cross-country/104594`

Не создавайте GitHub Issues для вопросов — оставим их для багов и фич-реквестов.

## <a name="issue"></a> Нашли баг?

Если вы нашли баг в исходниках, создайте ишью в трекере: `https://github.com/klinkin/awesome-steinschliff/issues`.
Ещё лучше — отправьте Pull Request с фиксом.

## <a name="feature"></a> Не хватает фичи?

Запросите новую функциональность через ишью: `https://github.com/klinkin/awesome-steinschliff/issues/new/choose`.

Если хотите реализовать сами:

- Для крупных изменений сначала откройте ишью с предложением и описанием дизайна для обсуждения.
- Небольшие улучшения можно сразу присылать в виде Pull Request.

## <a name="submit"></a> Как отправлять ишью/PR

### Отправка ишью

Перед созданием ишью проверьте, нет ли уже существующей: `https://github.com/klinkin/awesome-steinschliff/issues`.
Для баг-репорта опишите минимальные шаги воспроизведения.

### Отправка Pull Request

Перед отправкой PR соблюдайте следующие правила:

1. Все PR должны быть основаны на ветке `main` и открыты против `main`.
2. Проверьте существующие PR: `https://github.com/klinkin/awesome-steinschliff/pulls`, чтобы не дублировать работу.
3. Убедитесь, что есть ишью, описывающее проблему/фичу, или чёткое описание в самом PR.
4. Форкните репозиторий и создайте новую ветку от `main`.
5. Внесите изменения, добавьте тесты и обновите документацию при необходимости.
6. Следуйте [правилам кодирования](#rules).
7. Запустите локально все проверки из [руководства по разработке](DEVELOPING.md):

```bash
make format
make lint
make test
```

8. Делайте коммиты по [конвенции сообщений](#commit).
9. Запушьте ветку и откройте Pull Request на `klinkin:main`.

#### Ревью Pull Request

Мейнтейнеры могут отклонять PR, если нарушается [кодекс поведения](code-of-conduct.md) или если стоимость поддержки изменений превышает пользу.

#### Адресация замечаний

- Внесите необходимые правки.
- Снова запустите проверки.
- Добавьте коммит(ы) и запушьте — PR обновится автоматически.

#### После мержа

После мержа можно безопасно удалить свою ветку и подтянуть изменения из апстрима.

## <a name="rules"></a> Правила кодирования

Для единообразия кода придерживайтесь следующих правил:

- Все изменения должны проходить локальные проверки качества кода (линтеры, форматтеры, типы). См. раздел в [DEVELOPING.md](DEVELOPING.md).
- Новые фичи и фиксы должны быть покрыты тестами (unit/integration по необходимости).
- Обновляйте документацию для публичных возможностей.
- Старайтесь избегать ломающих изменений. До версии `1.0.0` они допустимы только при смене среднего номера версии.

## <a name="commit"></a> Конвенция сообщений коммитов

Используем Conventional Commits (`v1.0.0`). Допустимые типы:

- chore: обслуживающие изменения
- ci: изменения в CI/скриптах
- docs: документация
- feat: новая функциональность
- fix: исправление бага
- refactor: рефакторинг без новой фичи и фиксов
- test: добавление/исправление тестов
- revert: откат проблемного коммита
- style: правки форматирования/стиля без изменения логики
- perf: улучшение производительности

Примеры:

```bash
git commit -m "feat: add new structure attributes"
git commit -m "fix: correct temperature formatting for ranges"
git commit -m "docs: translate DEVELOPING.md to Russian"
git commit -m "test: add generator tests for sorting by temperature"
```

## <a name="merge"></a> Слияние Pull Request

Используйте стратегию `Squash and merge` — это делает историю чище и упрощает генерацию релиз-нотов.

Подробнее: `https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/about-pull-request-merges#squash-and-merge-your-commits`
